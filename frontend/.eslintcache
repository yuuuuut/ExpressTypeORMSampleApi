[{"/usr/app/src/index.tsx":"1","/usr/app/src/reportWebVitals.ts":"2","/usr/app/src/App.tsx":"3","/usr/app/src/Router.tsx":"4","/usr/app/src/components/BBB.tsx":"5","/usr/app/src/components/AAA.tsx":"6","/usr/app/src/contexts/AuthContext.tsx":"7","/usr/app/src/contexts/Common.ts":"8","/usr/app/src/apis/user.api.ts":"9","/usr/app/src/libs/firebase.ts":"10","/usr/app/src/apis/axios.ts":"11","/usr/app/src/pages/Root.tsx":"12","/usr/app/src/apis/relationship.api.ts":"13","/usr/app/src/pages/users/UserShowPage.tsx":"14","/usr/app/src/apis/room.api.ts":"15","/usr/app/src/pages/rooms/RoomShowPage.tsx":"16","/usr/app/src/apis/message.api.ts":"17"},{"size":373,"mtime":1618836614954,"results":"18","hashOfConfig":"19"},{"size":416,"mtime":1607877752069,"results":"20","hashOfConfig":"19"},{"size":116,"mtime":1618755268716,"results":"21","hashOfConfig":"19"},{"size":651,"mtime":1619229731773,"results":"22","hashOfConfig":"19"},{"size":366,"mtime":1619011011982,"results":"23","hashOfConfig":"19"},{"size":615,"mtime":1619184228736,"results":"24","hashOfConfig":"19"},{"size":3203,"mtime":1618983310126,"results":"25","hashOfConfig":"19"},{"size":388,"mtime":1618843086578,"results":"26","hashOfConfig":"19"},{"size":1258,"mtime":1619357653259,"results":"27","hashOfConfig":"19"},{"size":446,"mtime":1618833105572,"results":"28","hashOfConfig":"19"},{"size":131,"mtime":1618882689408,"results":"29","hashOfConfig":"19"},{"size":1731,"mtime":1619184283158,"results":"30","hashOfConfig":"19"},{"size":398,"mtime":1619184379503,"results":"31","hashOfConfig":"19"},{"size":2489,"mtime":1619611567081,"results":"32","hashOfConfig":"19"},{"size":1434,"mtime":1619611455771,"results":"33","hashOfConfig":"19"},{"size":4188,"mtime":1619594368332,"results":"34","hashOfConfig":"19"},{"size":1593,"mtime":1619503536138,"results":"35","hashOfConfig":"19"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"13smr3u",{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"38"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"38"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"38"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52","usedDeprecatedRules":"38"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"38"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"38"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"38"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"74"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77","usedDeprecatedRules":"38"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"/usr/app/src/index.tsx",[],[],"/usr/app/src/reportWebVitals.ts",["80"],"import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","/usr/app/src/App.tsx",["81"],"import React from 'react'\nimport Router from './Router'\n\nfunction App() {\n  return <Router />\n}\n\nexport default App\n","/usr/app/src/Router.tsx",[],"/usr/app/src/components/BBB.tsx",["82","83","84"],"import axios from 'axios'\nimport { useEffect } from 'react'\n\nexport const BBB = () => {\n  const a = async () => {\n    const b = await axios.get('http://localhost:4000/api/users')\n\n    return b\n  }\n\n  useEffect(() => {\n    console.log('OK!')\n\n    const res = a()\n\n    console.log(res)\n  }, [])\n\n  return (\n    <div>\n      <h1 onClick={a}>BBB!!!</h1>\n    </div>\n  )\n}\n","/usr/app/src/components/AAA.tsx",["85","86"],"import axios from 'axios'\nimport { Link } from 'react-router-dom'\n\nexport const AAA = (): JSX.Element => {\n  const a = async () => {\n    const token = localStorage.getItem('@token')\n    if (!token) console.log('None Token')\n\n    const data = {\n      lineId: 'A',\n    }\n\n    const res = await axios.put('http://localhost:4000/api/profiles', data, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n\n    console.log(res)\n  }\n\n  return (\n    <div>\n      <h1>AAA!!!</h1>\n      <a href=\"/bbb\">BBB</a>\n      <Link to={'/bbb'}>q</Link>\n\n      <button onClick={a}>Update</button>\n    </div>\n  )\n}\n","/usr/app/src/contexts/AuthContext.tsx",["87","88","89"],"import React, { useCallback, useEffect, useState } from 'react'\nimport { create } from '../apis/user.api'\n\nimport { createContextType } from './Common'\nimport firebase from '../libs/firebase'\n\n/***************************\n *   Types\n **************************/\ntype AuthContextType = {\n  user: User | null\n  loading: boolean\n  refreshToken: () => Promise<void>\n  signin: () => Promise<void>\n  signout: () => Promise<void>\n}\n\n/***************************\n *   CreateContext\n **************************/\nconst [useAuth, SetAuthProvider] = createContextType<AuthContextType>()\n\nconst AuthProvider: React.FC = ({ children }) => {\n  const val = useAuthCtx()\n\n  return <SetAuthProvider value={val}>{children}</SetAuthProvider>\n}\n\n/***************************\n *   Main\n **************************/\nconst useAuthCtx = (): AuthContextType => {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(false)\n\n  /**\n   * Tokenを更新する。\n   */\n  const refreshToken = async () => {\n    const currentUser = firebase.auth().currentUser\n    if (!currentUser) {\n      console.log('None CurrentUser')\n      return\n    }\n\n    const token = await currentUser.getIdToken()\n    console.log(token)\n    if (!token) {\n      console.log('None Token')\n      return\n    }\n\n    localStorage.setItem('@token', token)\n  }\n\n  /**\n   * GoogleAuth SignIn\n   */\n  const signin = useCallback(async () => {\n    const provider = new firebase.auth.GoogleAuthProvider()\n\n    await firebase\n      .auth()\n      .signInWithPopup(provider)\n      .then(async (data) => {\n        if (data.user) {\n          if (data.user.displayName && data.user.photoURL) {\n            const user: User = {\n              id: data.user.uid,\n              displayName: data.user.displayName,\n              photoURL: data.user.photoURL,\n            }\n\n            await create(user)\n\n            const currentUser = firebase.auth().currentUser\n            if (!currentUser) throw new Error()\n\n            const token = await currentUser.getIdToken()\n            if (token) {\n              localStorage.setItem('@token', token)\n            }\n          }\n        }\n      })\n      .catch((e) => {\n        setUser(null)\n        if (e.code === 'auth/popup-closed-by-user') {\n          return\n        }\n      })\n  }, [])\n\n  /**\n   * GoogleAuth SignOut\n   */\n  const signout = useCallback(async () => {\n    firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        setUser(null)\n        localStorage.removeItem('@token')\n      })\n  }, [])\n\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(async (user) => {\n      setLoading(true)\n\n      if (user) {\n        const token = await user.getIdToken()\n\n        localStorage.setItem('@token', token)\n\n        if (user.displayName && user.photoURL) {\n          const userData: User = {\n            id: user.uid,\n            displayName: user.displayName,\n            photoURL: user.photoURL,\n          }\n          setUser(userData)\n        }\n      } else {\n        setUser(null)\n        localStorage.removeItem('@token')\n      }\n      setLoading(false)\n    })\n  }, [])\n\n  return { user, loading, refreshToken, signin, signout }\n}\n\nexport { useAuth, AuthProvider }\n","/usr/app/src/contexts/Common.ts",[],"/usr/app/src/apis/user.api.ts",[],"/usr/app/src/libs/firebase.ts",[],"/usr/app/src/apis/axios.ts",[],"/usr/app/src/pages/Root.tsx",["90","91","92"],"import { useEffect, useState } from 'react'\nimport * as userAPI from '../apis/user.api'\nimport * as relatinoshipAPI from '../apis/relationship.api'\nimport { useAuth } from '../contexts/AuthContext'\n\nconst Root = (): JSX.Element => {\n  const { user, signin, signout } = useAuth()\n\n  const handleSignin = async () => {\n    await signin()\n  }\n\n  const handleSignout = async () => {\n    await signout()\n  }\n\n  const [users, setUsers] = useState<User[]>([])\n  const [load, setLoad] = useState(false)\n\n  async function getUsers() {\n    setLoad(true)\n    const response = await userAPI.index()\n\n    if (!response.data.data) {\n      return\n    }\n    const usersData = response.data.data.users\n\n    setUsers(usersData)\n    setLoad(false)\n  }\n\n  async function follow(userId: string) {\n    const token = localStorage.getItem('@token')\n    if (!token) {\n      console.log('None Token')\n      return\n    }\n\n    console.log(token)\n\n    const response = await relatinoshipAPI.create(userId, token)\n\n    console.log(response)\n  }\n\n  useEffect(() => {\n    getUsers()\n  }, [])\n\n  return (\n    <div>\n      <h1>Root Page</h1>\n      {user ? (\n        <button onClick={handleSignout}>Logout</button>\n      ) : (\n        <button onClick={handleSignin}>Login</button>\n      )}\n\n      {load ? (\n        <div>Loading...</div>\n      ) : (\n        <>\n          {users && (\n            <>\n              {users.map((user) => (\n                <li key={user.id}>\n                  <div>ID:{user.id}</div>\n                  <div> Name:{user.displayName}</div>\n                  <button onClick={() => follow(user.id)}>Follow</button>\n                </li>\n              ))}\n            </>\n          )}\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default Root\n","/usr/app/src/apis/relationship.api.ts",[],"/usr/app/src/pages/users/UserShowPage.tsx",["93","94","95","96","97","98","99","100"],"import { useEffect, useState } from 'react'\nimport { useHistory, useLocation } from 'react-router'\n\nimport * as userAPI from '../../apis/user.api'\nimport * as roomAPI from '../../apis/room.api'\nimport { useAuth } from '../../contexts/AuthContext'\nimport { Link } from 'react-router-dom'\n\nconst UserShowPage = (): JSX.Element => {\n  const { user } = useAuth()\n\n  const location = useLocation()\n  const history = useHistory()\n  const id = location.pathname.split('/users/')[1]\n\n  const [u, setU] = useState<User | null>()\n  const [isMutualFollow, setIsMutualFollow] = useState(false)\n  const [isRoom, setIsRoom] = useState(false)\n  const [roomId, setRoomId] = useState('')\n\n  async function getUser() {\n    const token = localStorage.getItem('@token')\n    if (!token) return\n\n    const response = await userAPI.show(id, token)\n    if (!response.data.data) return\n\n    console.log(response)\n\n    const u = response.data.data.user\n    setU(u)\n\n    if (response.data.data.user.id !== user?.id) {\n      const isMutualFollow = response.data.data.isMutualFollow,\n        isRoom = response.data.data.isRoom,\n        roomId = response.data.data.roomId\n      setIsMutualFollow(isMutualFollow)\n      setIsRoom(isRoom)\n      setRoomId(roomId)\n\n      console.log('OK')\n      console.log(isMutualFollow)\n      console.log(isRoom)\n    }\n  }\n\n  async function createRoom(id: string) {\n    try {\n      const token = localStorage.getItem('@token')\n      if (!token) {\n        console.log('None Token')\n        return\n      }\n\n      const response = await roomAPI.create(id, token)\n      console.log(response.data.data?.room.id)\n      const roomId = response.data.data?.room.id\n\n      history.push(`/rooms/${roomId}`)\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  async function getRooms() {\n    const token = localStorage.getItem('@token')\n    if (!token) return\n\n    const response = await roomAPI.index(token)\n    console.log(response)\n  }\n\n  useEffect(() => {\n    getUser()\n  }, [])\n\n  return (\n    <div>\n      {u && (\n        <>\n          <div>{u.id}</div>\n          <div>{u.displayName}</div>\n          <div onClick={getRooms}>Get Rooms</div>\n          {isMutualFollow && (\n            <div>\n              {isRoom ? (\n                <Link to={`/rooms/${roomId}`}>Roomへ</Link>\n              ) : (\n                <button onClick={() => createRoom(u.id)}>Room Create</button>\n              )}\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default UserShowPage\n","/usr/app/src/apis/room.api.ts",[],[],"/usr/app/src/pages/rooms/RoomShowPage.tsx",["101","102","103","104","105","106","107","108","109","110"],"import { useEffect, useState } from 'react'\nimport { useHistory, useLocation } from 'react-router'\n\nimport * as messageAPI from '../../apis/message.api'\nimport * as roomAPI from '../../apis/room.api'\nimport { useAuth } from '../../contexts/AuthContext'\n\nconst RoomShowPage = (): JSX.Element => {\n  const { user } = useAuth()\n  const location = useLocation()\n  const id = location.pathname.split('/rooms/')[1]\n\n  const history = useHistory()\n\n  const [room, setRoom] = useState<Room | null>()\n  const [messages, setMessages] = useState<Message[]>([])\n\n  async function getRoom() {\n    const token = localStorage.getItem('@token')\n    if (!token) {\n      console.log('None Token')\n      return\n    }\n\n    const response = await roomAPI.show(id, token)\n    console.log(response)\n    const room = response.data.data?.room\n    setRoom(room)\n  }\n\n  async function getMessages() {\n    const token = localStorage.getItem('@token')\n    if (!token) {\n      console.log('None Token')\n      return\n    }\n\n    const response = await messageAPI.index(id, token)\n    console.log(response)\n\n    if (!response.data.data) {\n      return\n    }\n\n    const messages = response.data.data.messages\n    setMessages(messages)\n  }\n\n  const createMessage = async () => {\n    const token = localStorage.getItem('@token')\n    if (!token) {\n      console.log('None Token')\n      return\n    }\n\n    const response = await messageAPI.create(id, 'LINE', token)\n\n    console.log(response)\n  }\n\n  const updateMessageIsApproval = async (messageId: number) => {\n    const token = localStorage.getItem('@token')\n    if (!token) {\n      console.log('None Token')\n      return\n    }\n\n    const response = await messageAPI.update(messageId, 'IS_APPROVAL', token)\n    console.log(response)\n    if (!response.data.data) {\n      return\n    }\n    history.go(0)\n  }\n\n  const updateMessageRejected = async (messageId: number) => {\n    const token = localStorage.getItem('@token')\n    if (!token) {\n      console.log('None Token')\n      return\n    }\n\n    const response = await messageAPI.update(messageId, 'REJECTED', token)\n    console.log(response)\n    if (!response.data.data) {\n      return\n    }\n    history.go(0)\n  }\n\n  useEffect(() => {\n    getRoom()\n    getMessages()\n  }, [])\n\n  return (\n    <div>\n      {room ? (\n        <div>\n          {room.id}\n          <button onClick={() => createMessage()}>Create Message</button>\n          {messages !== [] && (\n            <div>\n              {messages.map((m) => (\n                <li key={m.id}>\n                  {m.kind === 'LINE' && (\n                    <div>\n                      {!m.rejected ? (\n                        <div>\n                          {m.isApproval ? (\n                            <h3>LINE ID 表示</h3>\n                          ) : (\n                            <>\n                              {m.user.id !== user?.id ? (\n                                <>\n                                  <h3>LINE ID の交換を許可しますか??</h3>\n                                  <div\n                                    onClick={() =>\n                                      updateMessageIsApproval(m.id)\n                                    }\n                                  >\n                                    交換しましょう!!\n                                  </div>\n                                  <div\n                                    onClick={() => updateMessageRejected(m.id)}\n                                  >\n                                    ごめんなさい...\n                                  </div>\n                                </>\n                              ) : (\n                                <h3>LINE IDを送りました。</h3>\n                              )}\n                            </>\n                          )}\n                        </div>\n                      ) : (\n                        <h3>交換は承認されませんでした...</h3>\n                      )}\n                    </div>\n                  )}\n                </li>\n              ))}\n            </div>\n          )}\n        </div>\n      ) : (\n        <div>Not Room</div>\n      )}\n    </div>\n  )\n}\n\nexport default RoomShowPage\n","/usr/app/src/apis/message.api.ts",[],{"ruleId":"111","severity":1,"message":"112","line":3,"column":25,"nodeType":"113","messageId":"114","endLine":3,"endColumn":57},{"ruleId":"111","severity":1,"message":"112","line":4,"column":1,"nodeType":"115","messageId":"114","endLine":4,"endColumn":15},{"ruleId":"111","severity":1,"message":"112","line":4,"column":20,"nodeType":"113","messageId":"114","endLine":4,"endColumn":25},{"ruleId":"116","severity":1,"message":"117","line":12,"column":5,"nodeType":"118","messageId":"119","endLine":12,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":16,"column":5,"nodeType":"118","messageId":"119","endLine":16,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":7,"column":17,"nodeType":"118","messageId":"119","endLine":7,"endColumn":28},{"ruleId":"116","severity":1,"message":"117","line":19,"column":5,"nodeType":"118","messageId":"119","endLine":19,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":42,"column":7,"nodeType":"118","messageId":"119","endLine":42,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":47,"column":5,"nodeType":"118","messageId":"119","endLine":47,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":49,"column":7,"nodeType":"118","messageId":"119","endLine":49,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":36,"column":7,"nodeType":"118","messageId":"119","endLine":36,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":40,"column":5,"nodeType":"118","messageId":"119","endLine":40,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":44,"column":5,"nodeType":"118","messageId":"119","endLine":44,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":28,"column":5,"nodeType":"118","messageId":"119","endLine":28,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":41,"column":7,"nodeType":"118","messageId":"119","endLine":41,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":42,"column":7,"nodeType":"118","messageId":"119","endLine":42,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":43,"column":7,"nodeType":"118","messageId":"119","endLine":43,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":51,"column":9,"nodeType":"118","messageId":"119","endLine":51,"endColumn":20},{"ruleId":"116","severity":1,"message":"117","line":56,"column":7,"nodeType":"118","messageId":"119","endLine":56,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":61,"column":7,"nodeType":"118","messageId":"119","endLine":61,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":70,"column":5,"nodeType":"118","messageId":"119","endLine":70,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":21,"column":7,"nodeType":"118","messageId":"119","endLine":21,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":26,"column":5,"nodeType":"118","messageId":"119","endLine":26,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":34,"column":7,"nodeType":"118","messageId":"119","endLine":34,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":39,"column":5,"nodeType":"118","messageId":"119","endLine":39,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":52,"column":7,"nodeType":"118","messageId":"119","endLine":52,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":58,"column":5,"nodeType":"118","messageId":"119","endLine":58,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":64,"column":7,"nodeType":"118","messageId":"119","endLine":64,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":69,"column":5,"nodeType":"118","messageId":"119","endLine":69,"endColumn":16},{"ruleId":"116","severity":1,"message":"117","line":79,"column":7,"nodeType":"118","messageId":"119","endLine":79,"endColumn":18},{"ruleId":"116","severity":1,"message":"117","line":84,"column":5,"nodeType":"118","messageId":"119","endLine":84,"endColumn":16},"@typescript-eslint/explicit-module-boundary-types","Missing return type on function.","ArrowFunctionExpression","missingReturnType","FunctionDeclaration","no-console","Unexpected console statement.","MemberExpression","unexpected"]